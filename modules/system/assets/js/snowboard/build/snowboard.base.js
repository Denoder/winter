!function(){var t={9662:function(t,n,e){var r=e(7854),i=e(614),o=e(6330),s=r.TypeError;t.exports=function(t){if(i(t))return t;throw s(o(t)+" is not a function")}},6077:function(t,n,e){var r=e(7854),i=e(614),o=r.String,s=r.TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw s("Can't set "+o(t)+" as a prototype")}},1223:function(t,n,e){var r=e(5112),i=e(30),o=e(3070),s=r("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},9670:function(t,n,e){var r=e(7854),i=e(111),o=r.String,s=r.TypeError;t.exports=function(t){if(i(t))return t;throw s(o(t)+" is not an object")}},1318:function(t,n,e){var r=e(5656),i=e(1400),o=e(6244),s=function(t){return function(n,e,s){var a,u=r(n),c=o(u),f=i(s,c);if(t&&e!=e){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===e)return t||f||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},4326:function(t,n,e){var r=e(1702),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},9920:function(t,n,e){var r=e(2597),i=e(3887),o=e(1236),s=e(3070);t.exports=function(t,n,e){for(var a=i(n),u=s.f,c=o.f,f=0;f<a.length;f++){var l=a[f];r(t,l)||e&&r(e,l)||u(t,l,c(n,l))}}},8544:function(t,n,e){var r=e(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4994:function(t,n,e){"use strict";var r=e(3383).IteratorPrototype,i=e(30),o=e(9114),s=e(8003),a=e(7497),u=function(){return this};t.exports=function(t,n,e,c){var f=n+" Iterator";return t.prototype=i(r,{next:o(+!c,e)}),s(t,f,!1,!0),a[f]=u,t}},8880:function(t,n,e){var r=e(9781),i=e(3070),o=e(9114);t.exports=r?function(t,n,e){return i.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},9114:function(t){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},654:function(t,n,e){"use strict";var r=e(2109),i=e(6916),o=e(1913),s=e(6530),a=e(614),u=e(4994),c=e(9518),f=e(7674),l=e(8003),h=e(8880),p=e(1320),g=e(5112),d=e(7497),y=e(3383),v=s.PROPER,b=s.CONFIGURABLE,w=y.IteratorPrototype,m=y.BUGGY_SAFARI_ITERATORS,S=g("iterator"),O="keys",x="values",P="entries",E=function(){return this};t.exports=function(t,n,e,s,g,y,j){u(e,n,s);var L,k,T,F=function(t){if(t===g&&M)return M;if(!m&&t in B)return B[t];switch(t){case O:case x:case P:return function(){return new e(this,t)}}return function(){return new e(this)}},A=n+" Iterator",N=!1,B=t.prototype,I=B[S]||B["@@iterator"]||g&&B[g],M=!m&&I||F(g),C="Array"==n&&B.entries||I;if(C&&(L=c(C.call(new t)))!==Object.prototype&&L.next&&(o||c(L)===w||(f?f(L,w):a(L[S])||p(L,S,E)),l(L,A,!0,!0),o&&(d[A]=E)),v&&g==x&&I&&I.name!==x&&(!o&&b?h(B,"name",x):(N=!0,M=function(){return i(I,this)})),g)if(k={values:F(x),keys:y?M:F(O),entries:F(P)},j)for(T in k)(m||N||!(T in B))&&p(B,T,k[T]);else r({target:n,proto:!0,forced:m||N},k);return o&&!j||B[S]===M||p(B,S,M,{name:g}),d[n]=M,k}},9781:function(t,n,e){var r=e(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,n,e){var r=e(7854),i=e(111),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,n,e){var r=e(317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;t.exports=i===Object.prototype?void 0:i},8113:function(t,n,e){var r=e(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,n,e){var r,i,o=e(7854),s=e(8113),a=o.process,u=o.Deno,c=a&&a.versions||u&&u.version,f=c&&c.v8;f&&(i=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,n,e){var r=e(7854),i=e(1236).f,o=e(8880),s=e(1320),a=e(3505),u=e(9920),c=e(4705);t.exports=function(t,n){var e,f,l,h,p,g=t.target,d=t.global,y=t.stat;if(e=d?r:y?r[g]||a(g,{}):(r[g]||{}).prototype)for(f in n){if(h=n[f],l=t.noTargetGet?(p=i(e,f))&&p.value:e[f],!c(d?f:g+(y?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;u(h,l)}(t.sham||l&&l.sham)&&o(h,"sham",!0),s(e,f,h,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},6916:function(t){var n=Function.prototype.call;t.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},6530:function(t,n,e){var r=e(9781),i=e(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),u=a&&"something"===function(){}.name,c=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},1702:function(t){var n=Function.prototype,e=n.bind,r=n.call,i=e&&e.bind(r,r);t.exports=e?function(t){return t&&i(t)}:function(t){return t&&function(){return r.apply(t,arguments)}}},5005:function(t,n,e){var r=e(7854),i=e(614),o=function(t){return i(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?o(r[t]):r[t]&&r[t][n]}},8173:function(t,n,e){var r=e(9662);t.exports=function(t,n){var e=t[n];return null==e?void 0:r(e)}},7854:function(t,n,e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e.g&&e.g)||function(){return this}()||Function("return this")()},2597:function(t,n,e){var r=e(1702),i=e(7908),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return o(i(t),n)}},3501:function(t){t.exports={}},490:function(t,n,e){var r=e(5005);t.exports=r("document","documentElement")},4664:function(t,n,e){var r=e(9781),i=e(7293),o=e(317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,n,e){var r=e(7854),i=e(1702),o=e(7293),s=e(4326),a=r.Object,u=i("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?u(t,""):a(t)}:a},2788:function(t,n,e){var r=e(1702),i=e(614),o=e(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},9909:function(t,n,e){var r,i,o,s=e(8536),a=e(7854),u=e(1702),c=e(111),f=e(8880),l=e(2597),h=e(5465),p=e(6200),g=e(3501),d="Object already initialized",y=a.TypeError,v=a.WeakMap;if(s||h.state){var b=h.state||(h.state=new v),w=u(b.get),m=u(b.has),S=u(b.set);r=function(t,n){if(m(b,t))throw new y(d);return n.facade=t,S(b,t,n),n},i=function(t){return w(b,t)||{}},o=function(t){return m(b,t)}}else{var O=p("state");g[O]=!0,r=function(t,n){if(l(t,O))throw new y(d);return n.facade=t,f(t,O,n),n},i=function(t){return l(t,O)?t[O]:{}},o=function(t){return l(t,O)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(n){var e;if(!c(n)||(e=i(n)).type!==t)throw y("Incompatible receiver, "+t+" required");return e}}}},614:function(t){t.exports=function(t){return"function"==typeof t}},4705:function(t,n,e){var r=e(7293),i=e(614),o=/#|\.prototype\./,s=function(t,n){var e=u[a(t)];return e==f||e!=c&&(i(n)?r(n):!!n)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=s.data={},c=s.NATIVE="N",f=s.POLYFILL="P";t.exports=s},111:function(t,n,e){var r=e(614);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,n,e){var r=e(7854),i=e(5005),o=e(614),s=e(7976),a=e(3307),u=r.Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var n=i("Symbol");return o(n)&&s(n.prototype,u(t))}},3383:function(t,n,e){"use strict";var r,i,o,s=e(7293),a=e(614),u=e(30),c=e(9518),f=e(1320),l=e(5112),h=e(1913),p=l("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=c(c(o)))!==Object.prototype&&(r=i):g=!0),null==r||s((function(){var t={};return r[p].call(t)!==t}))?r={}:h&&(r=u(r)),a(r[p])||f(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},7497:function(t){t.exports={}},6244:function(t,n,e){var r=e(7466);t.exports=function(t){return r(t.length)}},133:function(t,n,e){var r=e(7392),i=e(7293);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(t,n,e){var r=e(7854),i=e(614),o=e(2788),s=r.WeakMap;t.exports=i(s)&&/native code/.test(o(s))},30:function(t,n,e){var r,i=e(9670),o=e(6048),s=e(748),a=e(3501),u=e(490),c=e(317),f=e(6200),l=f("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"</"+"script>"},g=function(t){t.write(p("")),t.close();var n=t.parentWindow.Object;return t=null,n},d=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,n;d="undefined"!=typeof document?document.domain&&r?g(r):((n=c("iframe")).style.display="none",u.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):g(r);for(var e=s.length;e--;)delete d.prototype[s[e]];return d()};a[l]=!0,t.exports=Object.create||function(t,n){var e;return null!==t?(h.prototype=i(t),e=new h,h.prototype=null,e[l]=t):e=d(),void 0===n?e:o.f(e,n)}},6048:function(t,n,e){var r=e(9781),i=e(3353),o=e(3070),s=e(9670),a=e(5656),u=e(1956);n.f=r&&!i?Object.defineProperties:function(t,n){s(t);for(var e,r=a(n),i=u(n),c=i.length,f=0;c>f;)o.f(t,e=i[f++],r[e]);return t}},3070:function(t,n,e){var r=e(7854),i=e(9781),o=e(4664),s=e(3353),a=e(9670),u=e(4948),c=r.TypeError,f=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",g="writable";n.f=i?s?function(t,n,e){if(a(t),n=u(n),a(e),"function"==typeof t&&"prototype"===n&&"value"in e&&g in e&&!e.writable){var r=l(t,n);r&&r.writable&&(t[n]=e.value,e={configurable:p in e?e.configurable:r.configurable,enumerable:h in e?e.enumerable:r.enumerable,writable:!1})}return f(t,n,e)}:f:function(t,n,e){if(a(t),n=u(n),a(e),o)try{return f(t,n,e)}catch(t){}if("get"in e||"set"in e)throw c("Accessors not supported");return"value"in e&&(t[n]=e.value),t}},1236:function(t,n,e){var r=e(9781),i=e(6916),o=e(5296),s=e(9114),a=e(5656),u=e(4948),c=e(2597),f=e(4664),l=Object.getOwnPropertyDescriptor;n.f=r?l:function(t,n){if(t=a(t),n=u(n),f)try{return l(t,n)}catch(t){}if(c(t,n))return s(!i(o.f,t,n),t[n])}},8006:function(t,n,e){var r=e(6324),i=e(748).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5181:function(t,n){n.f=Object.getOwnPropertySymbols},9518:function(t,n,e){var r=e(7854),i=e(2597),o=e(614),s=e(7908),a=e(6200),u=e(8544),c=a("IE_PROTO"),f=r.Object,l=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var n=s(t);if(i(n,c))return n[c];var e=n.constructor;return o(e)&&n instanceof e?e.prototype:n instanceof f?l:null}},7976:function(t,n,e){var r=e(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,n,e){var r=e(1702),i=e(2597),o=e(5656),s=e(1318).indexOf,a=e(3501),u=r([].push);t.exports=function(t,n){var e,r=o(t),c=0,f=[];for(e in r)!i(a,e)&&i(r,e)&&u(f,e);for(;n.length>c;)i(r,e=n[c++])&&(~s(f,e)||u(f,e));return f}},1956:function(t,n,e){var r=e(6324),i=e(748);t.exports=Object.keys||function(t){return r(t,i)}},5296:function(t,n){"use strict";var e={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!e.call({1:2},1);n.f=i?function(t){var n=r(this,t);return!!n&&n.enumerable}:e},7674:function(t,n,e){var r=e(1702),i=e(9670),o=e(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,e={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),n=e instanceof Array}catch(t){}return function(e,r){return i(e),o(r),n?t(e,r):e.__proto__=r,e}}():void 0)},2140:function(t,n,e){var r=e(7854),i=e(6916),o=e(614),s=e(111),a=r.TypeError;t.exports=function(t,n){var e,r;if("string"===n&&o(e=t.toString)&&!s(r=i(e,t)))return r;if(o(e=t.valueOf)&&!s(r=i(e,t)))return r;if("string"!==n&&o(e=t.toString)&&!s(r=i(e,t)))return r;throw a("Can't convert object to primitive value")}},3887:function(t,n,e){var r=e(5005),i=e(1702),o=e(8006),s=e(5181),a=e(9670),u=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var n=o.f(a(t)),e=s.f;return e?u(n,e(t)):n}},1320:function(t,n,e){var r=e(7854),i=e(614),o=e(2597),s=e(8880),a=e(3505),u=e(2788),c=e(9909),f=e(6530).CONFIGURABLE,l=c.get,h=c.enforce,p=String(String).split("String");(t.exports=function(t,n,e,u){var c,l=!!u&&!!u.unsafe,g=!!u&&!!u.enumerable,d=!!u&&!!u.noTargetGet,y=u&&void 0!==u.name?u.name:n;i(e)&&("Symbol("===String(y).slice(0,7)&&(y="["+String(y).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(e,"name")||f&&e.name!==y)&&s(e,"name",y),(c=h(e)).source||(c.source=p.join("string"==typeof y?y:""))),t!==r?(l?!d&&t[n]&&(g=!0):delete t[n],g?t[n]=e:s(t,n,e)):g?t[n]=e:a(n,e)})(Function.prototype,"toString",(function(){return i(this)&&l(this).source||u(this)}))},4488:function(t,n,e){var r=e(7854).TypeError;t.exports=function(t){if(null==t)throw r("Can't call method on "+t);return t}},3505:function(t,n,e){var r=e(7854),i=Object.defineProperty;t.exports=function(t,n){try{i(r,t,{value:n,configurable:!0,writable:!0})}catch(e){r[t]=n}return n}},8003:function(t,n,e){var r=e(3070).f,i=e(2597),o=e(5112)("toStringTag");t.exports=function(t,n,e){t&&!e&&(t=t.prototype),t&&!i(t,o)&&r(t,o,{configurable:!0,value:n})}},6200:function(t,n,e){var r=e(2309),i=e(9711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,n,e){var r=e(7854),i=e(3505),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},2309:function(t,n,e){var r=e(1913),i=e(5465);(t.exports=function(t,n){return i[t]||(i[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.20.2",mode:r?"pure":"global",copyright:"© 2022 Denis Pushkarev (zloirock.ru)"})},1400:function(t,n,e){var r=e(9303),i=Math.max,o=Math.min;t.exports=function(t,n){var e=r(t);return e<0?i(e+n,0):o(e,n)}},5656:function(t,n,e){var r=e(8361),i=e(4488);t.exports=function(t){return r(i(t))}},9303:function(t){var n=Math.ceil,e=Math.floor;t.exports=function(t){var r=+t;return r!=r||0===r?0:(r>0?e:n)(r)}},7466:function(t,n,e){var r=e(9303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,n,e){var r=e(7854),i=e(4488),o=r.Object;t.exports=function(t){return o(i(t))}},7593:function(t,n,e){var r=e(7854),i=e(6916),o=e(111),s=e(2190),a=e(8173),u=e(2140),c=e(5112),f=r.TypeError,l=c("toPrimitive");t.exports=function(t,n){if(!o(t)||s(t))return t;var e,r=a(t,l);if(r){if(void 0===n&&(n="default"),e=i(r,t,n),!o(e)||s(e))return e;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),u(t,n)}},4948:function(t,n,e){var r=e(7593),i=e(2190);t.exports=function(t){var n=r(t,"string");return i(n)?n:n+""}},6330:function(t,n,e){var r=e(7854).String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},9711:function(t,n,e){var r=e(1702),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},3307:function(t,n,e){var r=e(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,n,e){var r=e(9781),i=e(7293);t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5112:function(t,n,e){var r=e(7854),i=e(2309),o=e(2597),s=e(9711),a=e(133),u=e(3307),c=i("wks"),f=r.Symbol,l=f&&f.for,h=u?f:f&&f.withoutSetter||s;t.exports=function(t){if(!o(c,t)||!a&&"string"!=typeof c[t]){var n="Symbol."+t;a&&o(f,t)?c[t]=f[t]:c[t]=u&&l?l(n):h(n)}return c[t]}},6992:function(t,n,e){"use strict";var r=e(5656),i=e(1223),o=e(7497),s=e(9909),a=e(3070).f,u=e(654),c=e(1913),f=e(9781),l="Array Iterator",h=s.set,p=s.getterFor(l);t.exports=u(Array,"Array",(function(t,n){h(this,{type:l,target:r(t),index:0,kind:n})}),(function(){var t=p(this),n=t.target,e=t.kind,r=t.index++;return!n||r>=n.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==e?{value:r,done:!1}:"values"==e?{value:n[r],done:!1}:{value:[r,n[r]],done:!1}}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!c&&f&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(t){}},3948:function(t,n,e){var r=e(7854),i=e(8324),o=e(8509),s=e(6992),a=e(8880),u=e(5112),c=u("iterator"),f=u("toStringTag"),l=s.values,h=function(t,n){if(t){if(t[c]!==l)try{a(t,c,l)}catch(n){t[c]=l}if(t[f]||a(t,f,n),i[n])for(var e in s)if(t[e]!==s[e])try{a(t,e,s[e])}catch(n){t[e]=s[e]}}};for(var p in i)h(r[p]&&r[p].prototype,p);h(o,"DOMTokenList")}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r](o,o.exports,e),o.exports}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";e(3948);class t{constructor(t){this.snowboard=t}dependencies(){return[]}listens(){return{}}destructor(){this.detach(),delete this.snowboard}}class n extends t{}class r{constructor(t,e,r){this.name=t,this.snowboard=e,this.instance=r,this.instances=[],this.singleton=r.prototype instanceof n,this.mocks={},this.originalFunctions={}}hasMethod(t){return!this.isFunction()&&"function"==typeof this.instance.prototype[t]}callMethod(){if(this.isFunction())return null;const t=Array.from(arguments),n=t.shift();return this.instance.prototype[n](t)}getInstance(){if(this.isFunction())return this.instance(...arguments);if(!this.dependenciesFulfilled()){const t=this.getDependencies().filter((t=>!this.snowboard.getPluginNames().includes(t)));throw new Error('The "'.concat(this.name,'" plugin requires the following plugins: ').concat(t.join(", ")))}if(this.isSingleton()){if(0===this.instances.length&&this.initialiseSingleton(),Object.keys(this.mocks).length>0){for(const[t,n]of Object.entries(this.originalFunctions))this.instances[0][t]=n;for(const[t,n]of Object.entries(this.mocks))this.instances[0][t]=function(){return n(this,...arguments)}}return this.instances[0]}if(Object.keys(this.mocks).length>0){for(const[t,n]of Object.entries(this.originalFunctions))this.instance.prototype[t]=n;for(const[t,n]of Object.entries(this.mocks))this.instance.prototype[t]=function(){return n(this,...arguments)}}const t=new this.instance(this.snowboard,...arguments);return t.detach=()=>this.instances.splice(this.instances.indexOf(t),1),this.instances.push(t),t}getInstances(){return this.isFunction()?[]:this.instances}isFunction(){return"function"==typeof this.instance&&this.instance.prototype instanceof t==!1}isSingleton(){return this.instance.prototype instanceof n==!0}initialiseSingleton(){if(!this.isSingleton())return;const t=new this.instance(this.snowboard);t.detach=()=>this.instances.splice(this.instances.indexOf(t),1),this.instances.push(t)}getDependencies(){return this.isFunction()||"function"!=typeof this.instance.prototype.dependencies?[]:this.instance.prototype.dependencies().map((t=>t.toLowerCase()))}dependenciesFulfilled(){const t=this.getDependencies();let n=!0;return t.forEach((t=>{this.snowboard.hasPlugin(t)||(n=!1)})),n}mock(t,n){if(!this.isFunction()){if(!this.instance.prototype[t])throw new Error('Function "'.concat(t,'" does not exist and cannot be mocked'));this.mocks[t]=n,this.originalFunctions[t]=this.instance.prototype[t],this.isSingleton()&&0===this.instances.length&&(this.initialiseSingleton(),this.instances[0][t]=function(){return n(this,...arguments)})}}unmock(t){this.isFunction()||this.mocks[t]&&(this.isSingleton()&&(this.instances[0][t]=this.originalFunctions[t]),delete this.mocks[t],delete this.originalFunctions[t])}}var i=t=>{let n;return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];n&&cancelAnimationFrame(n),n=requestAnimationFrame((()=>{t(...r)}))}};class o extends n{constructor(t){super(t),window.wnJSON=t=>this.parse(t),window.ocJSON=window.wnJSON}parse(t){const n=this.parseString(t);return JSON.parse(n)}parseString(t){if(!(t=t.trim()).length)throw new Error("Broken JSON object.");let n="",e=null,r=null,i="";for(;t&&","===t[0];)t=t.substr(1);if('"'===t[0]||"'"===t[0]){if(t[t.length-1]!==t[0])throw new Error("Invalid string JSON object.");i='"';for(var o=1;o<t.length;o++)if("\\"===t[o])"'"===t[o+1]||(i+=t[o]),i+=t[o+1],o++;else{if(t[o]===t[0])return i+='"',i;'"'===t[o]?i+='\\"':i+=t[o]}throw new Error("Invalid string JSON object.")}if("true"===t||"false"===t)return t;if("null"===t)return"null";var s=parseFloat(t);if(!isNaN(s))return s.toString();if("{"===t[0]){e="needKey",r=null,n="{";for(o=1;o<t.length;o++)if(!this.isBlankChar(t[o]))if("needKey"!==e||'"'!==t[o]&&"'"!==t[o]){if("needKey"===e&&this.canBeKeyHead(t[o]))r=this.parseKey(t,o),n+='"',n+=r,n+='"',o+=r.length-1,e="afterKey";else if("afterKey"===e&&":"===t[o])n+=":",e=":";else if(":"===e)i=this.getBody(t,o),o=o+i.originLength-1,n+=this.parseString(i.body),e="afterBody";else if("afterBody"===e||"needKey"===e){let r=o;for(;","===t[r]||this.isBlankChar(t[r]);)r++;if("}"===t[r]&&r===t.length-1){for(;","===n[n.length-1];)n=n.substr(0,n.length-1);return n+="}",n}r!==o&&"{"!==n&&(n+=",",e="needKey",o=r-1)}}else r=this.parseKey(t,o+1,t[o]),n+='"'+r+'"',o+=r.length,o+=1,e="afterKey";throw new Error("Broken JSON object near "+n)}if("["===t[0]){n="[",e="needBody";for(o=1;o<t.length;o++)if(" "!==t[o]&&"\n"!==t[o]&&"\t"!==t[o])if("needBody"===e){if(","===t[o]){n+="null,";continue}if("]"===t[o]&&o===t.length-1)return","===n[n.length-1]&&(n=n.substr(0,n.length-1)),n+="]",n;i=this.getBody(t,o),o=o+i.originLength-1,n+=this.parseString(i.body),e="afterBody"}else if("afterBody"===e)if(","===t[o])for(n+=",",e="needBody";","===t[o+1]||this.isBlankChar(t[o+1]);)","===t[o+1]&&(n+="null,"),o++;else if("]"===t[o]&&o===t.length-1)return n+="]",n;throw new Error("Broken JSON array near "+n)}}getBody(t,n){let e="";if('"'===t[n]||"'"===t[n]){e=t[n];for(var r=n+1;r<t.length;r++)if("\\"===t[r])e+=t[r],r+1<t.length&&(e+=t[r+1]),r++;else{if(t[r]===t[n])return e+=t[n],{originLength:e.length,body:e};e+=t[r]}throw new Error("Broken JSON string body near "+e)}if("t"===t[n]){if(t.indexOf("true",n)===n)return{originLength:"true".length,body:"true"};throw new Error("Broken JSON boolean body near "+t.substr(0,n+10))}if("f"===t[n]){if(t.indexOf("f",n)===n)return{originLength:"false".length,body:"false"};throw new Error("Broken JSON boolean body near "+t.substr(0,n+10))}if("n"===t[n]){if(t.indexOf("null",n)===n)return{originLength:"null".length,body:"null"};throw new Error("Broken JSON boolean body near "+t.substr(0,n+10))}if("-"===t[n]||"+"===t[n]||"."===t[n]||t[n]>="0"&&t[n]<="9"){e="";for(r=n;r<t.length;r++){if(!("-"===t[r]||"+"===t[r]||"."===t[r]||t[r]>="0"&&t[r]<="9"))return{originLength:e.length,body:e};e+=t[r]}throw new Error("Broken JSON number body near "+e)}if("{"===t[n]||"["===t[n]){var i=[t[n]];e=t[n];for(r=n+1;r<t.length;r++){if(e+=t[r],"\\"===t[r])r+1<t.length&&(e+=t[r+1]),r++;else if('"'===t[r])'"'===i[i.length-1]?i.pop():"'"!==i[i.length-1]&&i.push(t[r]);else if("'"===t[r])"'"===i[i.length-1]?i.pop():'"'!==i[i.length-1]&&i.push(t[r]);else if('"'!==i[i.length-1]&&"'"!==i[i.length-1])if("{"===t[r])i.push("{");else if("}"===t[r]){if("{"!==i[i.length-1])throw new Error("Broken JSON "+("{"===t[n]?"object":"array")+" body near "+e);i.pop()}else if("["===t[r])i.push("[");else if("]"===t[r]){if("["!==i[i.length-1])throw new Error("Broken JSON "+("{"===t[n]?"object":"array")+" body near "+e);i.pop()}if(!i.length)return{originLength:r-n,body:e}}throw new Error("Broken JSON "+("{"===t[n]?"object":"array")+" body near "+e)}throw new Error("Broken JSON body near "+t.substr(n-5>=0?n-5:0,50))}parseKey(t,n,e){let r="";for(var i=n;i<t.length;i++){if(e&&e===t[i])return r;if(!e&&(" "===t[i]||":"===t[i]))return r;r+=t[i],"\\"===t[i]&&i+1<t.length&&(r+=t[i+1],i++)}throw new Error("Broken JSON syntax near "+r)}canBeKeyHead(t){return"\\"!==t[0]&&(t[0]>="a"&&t[0]<="z"||t[0]>="A"&&t[0]<="Z"||"_"===t[0]||(t[0]>="0"&&t[0]<="9"||("$"===t[0]||t.charCodeAt(0)>255)))}isBlankChar(t){return" "===t||"\n"===t||"\t"===t}}class s extends n{constructor(t){super(t),window.wnSanitize=t=>this.sanitize(t),window.ocSanitize=window.wnSanitize}sanitize(t,n){const e=(new DOMParser).parseFromString(t,"text/html"),r=void 0===n||"boolean"!=typeof n||n;return this.sanitizeNode(e.getRootNode()),r?e.body.innerHTML:e.innerHTML}sanitizeNode(t){if("SCRIPT"===t.tagName)return void t.remove();this.trimAttributes(t);Array.from(t.children).forEach((t=>{this.sanitizeNode(t)}))}trimAttributes(t){if(t.attributes)for(let n=0;n<t.attributes.length;n++){const e=t.attributes.item(n).name,r=t.attributes.item(n).value;0!==e.indexOf("on")&&0!==r.indexOf("javascript:")||t.removeAttribute(e)}}}class a{constructor(t,n){this.debugEnabled="boolean"==typeof n&&!0===n,this.autoInitSingletons="boolean"!=typeof t||!1!==t,this.plugins={},this.attachAbstracts(),this.loadUtilities(),this.initialise(),this.debug("Snowboard framework initialised")}attachAbstracts(){this.PluginBase=t,this.Singleton=n}loadUtilities(){this.addPlugin("debounce",i),this.addPlugin("jsonParser",o),this.addPlugin("sanitizer",s)}initialise(){window.addEventListener("DOMContentLoaded",(()=>{this.autoInitSingletons&&this.initialiseSingletons(),this.globalEvent("ready")}))}initialiseSingletons(){Object.values(this.plugins).forEach((t=>{t.isSingleton()&&t.initialiseSingleton()}))}addPlugin(n,e){const i=n.toLowerCase();if(this.hasPlugin(i))throw new Error('A plugin called "'.concat(n,'" is already registered.'));if("function"!=typeof e&&e instanceof t==!1)throw new Error("The provided plugin must extend the PluginBase class, or must be a callback function.");if(void 0!==this[n]||void 0!==this[i])throw new Error("The given name is already in use for a property or method of the Snowboard class.");this.plugins[i]=new r(i,this,e);const o=function(){return this.plugins[i].getInstance(...arguments)};this[n]=o,this[i]=o,this.debug('Plugin "'.concat(n,'" registered'))}removePlugin(t){const n=t.toLowerCase();this.hasPlugin(n)?(this.plugins[n].getInstances().forEach((t=>{t.destructor()})),delete this.plugins[n],delete this[n],this.debug('Plugin "'.concat(t,'" removed'))):this.debug('Plugin "'.concat(t,'" already removed'))}hasPlugin(t){const n=t.toLowerCase();return void 0!==this.plugins[n]}getPlugins(){return this.plugins}getPluginNames(){return Object.keys(this.plugins)}getPlugin(t){if(!this.hasPlugin(t))throw new Error('No plugin called "'.concat(t,'" has been registered.'));return this.plugins[t]}listensToEvent(t){const n=[];for(const[e,r]of Object.entries(this.plugins)){if(r.isFunction())continue;if(!r.hasMethod("listens"))continue;"string"==typeof r.callMethod("listens")[t]&&n.push(e)}return n}globalEvent(t){this.debug('Calling global event "'.concat(t,'"'));const n=this.listensToEvent(t);if(0===n.length)return!0;let e=!1,r=Array.from(arguments);return r.shift(),n.forEach((n=>{const i=this.getPlugin(n);if(i.isFunction())return;i.isSingleton()&&0===i.getInstances().length&&i.initialiseSingleton();const o=i.callMethod("listens")[t];i.getInstances().forEach((t=>{if(!e){if(!t[o])throw new Error('Missing "'.concat(o,'" method in "').concat(n,'" plugin'));!1===t[o](...r)&&(e=!0)}}))})),!e}globalPromiseEvent(t){this.debug('Calling global promise event "'.concat(t,'"'));const n=this.listensToEvent(t);if(0===n.length)return Promise.resolve();const e=[];let r=Array.from(arguments);return r.shift(),n.forEach((n=>{const i=this.getPlugin(n);if(i.isFunction())return;i.isSingleton()&&0===i.getInstances().length&&i.initialiseSingleton();const o=i.callMethod("listens")[t];i.getInstances().forEach((t=>{const n=t[o](...r);n instanceof Promise!=!1&&e.push(n)}))})),0===e.length?Promise.resolve():Promise.all(e)}debug(){this.debugEnabled&&console.log("%c[Snowboard]","color: rgb(45, 167, 199);",...arguments)}}(t=>{const n=new a;t.snowboard=n,t.Snowboard=n,t.SnowBoard=n})(window)}()}();