!function(){var t={9662:function(t,e,n){var r=n(7854),o=n(614),i=n(6330),s=r.TypeError;t.exports=function(t){if(o(t))return t;throw s(i(t)+" is not a function")}},6077:function(t,e,n){var r=n(7854),o=n(614),i=r.String,s=r.TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw s("Can't set "+i(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),o=n(30),i=n(3070),s=r("unscopables"),c=Array.prototype;null==c[s]&&i.f(c,s,{configurable:!0,value:o(null)}),t.exports=function(t){c[s][t]=!0}},9670:function(t,e,n){var r=n(7854),o=n(111),i=r.String,s=r.TypeError;t.exports=function(t){if(o(t))return t;throw s(i(t)+" is not an object")}},1318:function(t,e,n){var r=n(5656),o=n(1400),i=n(6244),s=function(t){return function(e,n,s){var c,u=r(e),a=i(u),f=o(s,a);if(t&&n!=n){for(;a>f;)if((c=u[f++])!=c)return!0}else for(;a>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},4326:function(t,e,n){var r=n(1702),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},9920:function(t,e,n){var r=n(2597),o=n(3887),i=n(1236),s=n(3070);t.exports=function(t,e){for(var n=o(e),c=s.f,u=i.f,a=0;a<n.length;a++){var f=n[a];r(t,f)||c(t,f,u(e,f))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4994:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,o=n(30),i=n(9114),s=n(8003),c=n(7497),u=function(){return this};t.exports=function(t,e,n){var a=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),s(t,a,!1,!0),c[a]=u,t}},8880:function(t,e,n){var r=n(9781),o=n(3070),i=n(9114);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},654:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(1913),s=n(6530),c=n(614),u=n(4994),a=n(9518),f=n(7674),l=n(8003),h=n(8880),p=n(1320),d=n(5112),g=n(7497),y=n(3383),v=s.PROPER,b=s.CONFIGURABLE,m=y.IteratorPrototype,w=y.BUGGY_SAFARI_ITERATORS,S=d("iterator"),O="keys",x="values",j="entries",E=function(){return this};t.exports=function(t,e,n,s,d,y,L){u(n,e,s);var k,M,T,P=function(t){if(t===d&&I)return I;if(!w&&t in N)return N[t];switch(t){case O:case x:case j:return function(){return new n(this,t)}}return function(){return new n(this)}},F=e+" Iterator",A=!1,N=t.prototype,B=N[S]||N["@@iterator"]||d&&N[d],I=!w&&B||P(d),C="Array"==e&&N.entries||B;if(C&&(k=a(C.call(new t)))!==Object.prototype&&k.next&&(i||a(k)===m||(f?f(k,m):c(k[S])||p(k,S,E)),l(k,F,!0,!0),i&&(g[F]=E)),v&&d==x&&B&&B.name!==x&&(!i&&b?h(N,"name",x):(A=!0,I=function(){return o(B,this)})),d)if(M={values:P(x),keys:y?I:P(O),entries:P(j)},L)for(T in M)(w||A||!(T in N))&&p(N,T,M[T]);else r({target:e,proto:!0,forced:w||A},M);return i&&!L||N[S]===I||p(N,S,I,{name:d}),g[e]=I,M}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var r=n(7854),o=n(111),i=r.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,n){var r=n(317)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,o,i=n(7854),s=n(8113),c=i.process,u=i.Deno,a=c&&c.versions||u&&u.version,f=a&&a.v8;f&&(o=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),o=n(1236).f,i=n(8880),s=n(1320),c=n(3505),u=n(9920),a=n(4705);t.exports=function(t,e){var n,f,l,h,p,d=t.target,g=t.global,y=t.stat;if(n=g?r:y?r[d]||c(d,{}):(r[d]||{}).prototype)for(f in e){if(h=e[f],l=t.noTargetGet?(p=o(n,f))&&p.value:n[f],!a(g?f:d+(y?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;u(h,l)}(t.sham||l&&l.sham)&&i(h,"sham",!0),s(n,f,h,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},6916:function(t){var e=Function.prototype.call;t.exports=e.bind?e.bind(e):function(){return e.apply(e,arguments)}},6530:function(t,e,n){var r=n(9781),o=n(2597),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,c=o(i,"name"),u=c&&"something"===function(){}.name,a=c&&(!r||r&&s(i,"name").configurable);t.exports={EXISTS:c,PROPER:u,CONFIGURABLE:a}},1702:function(t){var e=Function.prototype,n=e.bind,r=e.call,o=n&&n.bind(r);t.exports=n?function(t){return t&&o(r,t)}:function(t){return t&&function(){return r.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),o=n(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},8173:function(t,e,n){var r=n(9662);t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),o=n(7293),i=n(317);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(7854),o=n(1702),i=n(7293),s=n(4326),c=r.Object,u=o("".split);t.exports=i((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?u(t,""):c(t)}:c},2788:function(t,e,n){var r=n(1702),o=n(614),i=n(5465),s=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},9909:function(t,e,n){var r,o,i,s=n(8536),c=n(7854),u=n(1702),a=n(111),f=n(8880),l=n(2597),h=n(5465),p=n(6200),d=n(3501),g="Object already initialized",y=c.TypeError,v=c.WeakMap;if(s||h.state){var b=h.state||(h.state=new v),m=u(b.get),w=u(b.has),S=u(b.set);r=function(t,e){if(w(b,t))throw new y(g);return e.facade=t,S(b,t,e),e},o=function(t){return m(b,t)||{}},i=function(t){return w(b,t)}}else{var O=p("state");d[O]=!0,r=function(t,e){if(l(t,O))throw new y(g);return e.facade=t,f(t,O,e),e},o=function(t){return l(t,O)?t[O]:{}},i=function(t){return l(t,O)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!a(e)||(n=o(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return n}}}},614:function(t){t.exports=function(t){return"function"==typeof t}},4705:function(t,e,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,s=function(t,e){var n=u[c(t)];return n==f||n!=a&&(o(e)?r(e):!!e)},c=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=s.data={},a=s.NATIVE="N",f=s.POLYFILL="P";t.exports=s},111:function(t,e,n){var r=n(614);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(7854),o=n(5005),i=n(614),s=n(7976),c=n(3307),u=r.Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return i(e)&&s(e.prototype,u(t))}},3383:function(t,e,n){"use strict";var r,o,i,s=n(7293),c=n(614),u=n(30),a=n(9518),f=n(1320),l=n(5112),h=n(1913),p=l("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):d=!0),null==r||s((function(){var t={};return r[p].call(t)!==t}))?r={}:h&&(r=u(r)),c(r[p])||f(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},7497:function(t){t.exports={}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},133:function(t,e,n){var r=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(t,e,n){var r=n(7854),o=n(614),i=n(2788),s=r.WeakMap;t.exports=o(s)&&/native code/.test(i(s))},30:function(t,e,n){var r,o=n(9670),i=n(6048),s=n(748),c=n(3501),u=n(490),a=n(317),f=n(6200),l=f("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"</"+"script>"},d=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;g="undefined"!=typeof document?document.domain&&r?d(r):((e=a("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):d(r);for(var n=s.length;n--;)delete g.prototype[s[n]];return g()};c[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=o(t),n=new h,h.prototype=null,n[l]=t):n=g(),void 0===e?n:i(n,e)}},6048:function(t,e,n){var r=n(9781),o=n(3070),i=n(9670),s=n(5656),c=n(1956);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=s(e),u=c(e),a=u.length,f=0;a>f;)o.f(t,n=u[f++],r[n]);return t}},3070:function(t,e,n){var r=n(7854),o=n(9781),i=n(4664),s=n(9670),c=n(4948),u=r.TypeError,a=Object.defineProperty;e.f=o?a:function(t,e,n){if(s(t),e=c(e),s(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),o=n(6916),i=n(5296),s=n(9114),c=n(5656),u=n(4948),a=n(2597),f=n(4664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=c(t),e=u(e),f)try{return l(t,e)}catch(t){}if(a(t,e))return s(!o(i.f,t,e),t[e])}},8006:function(t,e,n){var r=n(6324),o=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(7854),o=n(2597),i=n(614),s=n(7908),c=n(6200),u=n(8544),a=c("IE_PROTO"),f=r.Object,l=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var e=s(t);if(o(e,a))return e[a];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof f?l:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),o=n(2597),i=n(5656),s=n(1318).indexOf,c=n(3501),u=r([].push);t.exports=function(t,e){var n,r=i(t),a=0,f=[];for(n in r)!o(c,n)&&o(r,n)&&u(f,n);for(;e.length>a;)o(r,n=e[a++])&&(~s(f,n)||u(f,n));return f}},1956:function(t,e,n){var r=n(6324),o=n(748);t.exports=Object.keys||function(t){return r(t,o)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(1702),o=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},2140:function(t,e,n){var r=n(7854),o=n(6916),i=n(614),s=n(111),c=r.TypeError;t.exports=function(t,e){var n,r;if("string"===e&&i(n=t.toString)&&!s(r=o(n,t)))return r;if(i(n=t.valueOf)&&!s(r=o(n,t)))return r;if("string"!==e&&i(n=t.toString)&&!s(r=o(n,t)))return r;throw c("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),o=n(1702),i=n(8006),s=n(5181),c=n(9670),u=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(c(t)),n=s.f;return n?u(e,n(t)):e}},1320:function(t,e,n){var r=n(7854),o=n(614),i=n(2597),s=n(8880),c=n(3505),u=n(2788),a=n(9909),f=n(6530).CONFIGURABLE,l=a.get,h=a.enforce,p=String(String).split("String");(t.exports=function(t,e,n,u){var a,l=!!u&&!!u.unsafe,d=!!u&&!!u.enumerable,g=!!u&&!!u.noTargetGet,y=u&&void 0!==u.name?u.name:e;o(n)&&("Symbol("===String(y).slice(0,7)&&(y="["+String(y).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(n,"name")||f&&n.name!==y)&&s(n,"name",y),(a=h(n)).source||(a.source=p.join("string"==typeof y?y:""))),t!==r?(l?!g&&t[e]&&(d=!0):delete t[e],d?t[e]=n:s(t,e,n)):d?t[e]=n:c(e,n)})(Function.prototype,"toString",(function(){return o(this)&&l(this).source||u(this)}))},4488:function(t,e,n){var r=n(7854).TypeError;t.exports=function(t){if(null==t)throw r("Can't call method on "+t);return t}},3505:function(t,e,n){var r=n(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},8003:function(t,e,n){var r=n(3070).f,o=n(2597),i=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),o=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:function(t,e,n){var r=n(7854),o=n(3505),i="__core-js_shared__",s=r[i]||o(i,{});t.exports=s},2309:function(t,e,n){var r=n(1913),o=n(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.2",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},1400:function(t,e,n){var r=n(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5656:function(t,e,n){var r=n(8361),o=n(4488);t.exports=function(t){return r(o(t))}},9303:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){var r=+t;return r!=r||0===r?0:(r>0?n:e)(r)}},7466:function(t,e,n){var r=n(9303),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(7854),o=n(4488),i=r.Object;t.exports=function(t){return i(o(t))}},7593:function(t,e,n){var r=n(7854),o=n(6916),i=n(111),s=n(2190),c=n(8173),u=n(2140),a=n(5112),f=r.TypeError,l=a("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var n,r=c(t,l);if(r){if(void 0===e&&(e="default"),n=o(r,t,e),!i(n)||s(n))return n;throw f("Can't convert object to primitive value")}return void 0===e&&(e="number"),u(t,e)}},4948:function(t,e,n){var r=n(7593),o=n(2190);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},6330:function(t,e,n){var r=n(7854).String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},9711:function(t,e,n){var r=n(1702),o=0,i=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+i,36)}},3307:function(t,e,n){var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(t,e,n){var r=n(7854),o=n(2309),i=n(2597),s=n(9711),c=n(133),u=n(3307),a=o("wks"),f=r.Symbol,l=f&&f.for,h=u?f:f&&f.withoutSetter||s;t.exports=function(t){if(!i(a,t)||!c&&"string"!=typeof a[t]){var e="Symbol."+t;c&&i(f,t)?a[t]=f[t]:a[t]=u&&l?l(e):h(e)}return a[t]}},6992:function(t,e,n){"use strict";var r=n(5656),o=n(1223),i=n(7497),s=n(9909),c=n(654),u="Array Iterator",a=s.set,f=s.getterFor(u);t.exports=c(Array,"Array",(function(t,e){a(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=f(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},3948:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),s=n(6992),c=n(8880),u=n(5112),a=u("iterator"),f=u("toStringTag"),l=s.values,h=function(t,e){if(t){if(t[a]!==l)try{c(t,a,l)}catch(e){t[a]=l}if(t[f]||c(t,f,e),o[e])for(var n in s)if(t[n]!==s[n])try{c(t,n,s[n])}catch(e){t[n]=s[n]}}};for(var p in o)h(r[p]&&r[p].prototype,p);h(i,"DOMTokenList")}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";n(3948);class t{constructor(t){this.winter=t}dependencies(){return[]}listens(){return{}}destructor(){this.detach(),delete this.winter}}class e extends t{}class r{constructor(t,n,r){this.name=t,this.winter=n,this.instance=r,this.instances=[],this.singleton=r.prototype instanceof e,this.mocks={},this.originalFunctions={}}hasMethod(t){return!this.isFunction()&&"function"==typeof this.instance.prototype[t]}callMethod(){if(this.isFunction())return null;const t=Array.from(arguments),e=t.shift();return this.instance.prototype[e](t)}getInstance(){if(this.isFunction())return this.instance(...arguments);if(!this.dependenciesFulfilled()){const t=this.getDependencies().filter((t=>!this.winter.getModuleNames().includes(t)));throw new Error('The "'.concat(this.name,'" module requires the following modules: ').concat(t.join(", ")))}if(this.isSingleton()){if(0===this.instances.length&&this.initialiseSingleton(),Object.keys(this.mocks).length>0){for(const[t,e]of Object.entries(this.originalFunctions))this.instances[0][t]=e;for(const[t,e]of Object.entries(this.mocks))this.instances[0][t]=function(){return e(this,...arguments)}}return this.instances[0]}if(Object.keys(this.mocks).length>0){for(const[t,e]of Object.entries(this.originalFunctions))this.instance.prototype[t]=e;for(const[t,e]of Object.entries(this.mocks))this.instance.prototype[t]=function(){return e(this,...arguments)}}const t=new this.instance(this.winter,...arguments);return t.detach=()=>this.instances.splice(this.instances.indexOf(t),1),this.instances.push(t),t}getInstances(){return this.isFunction()?[]:this.instances}isFunction(){return"function"==typeof this.instance&&this.instance.prototype instanceof t==!1}isSingleton(){return this.instance.prototype instanceof e==!0}initialiseSingleton(){if(!this.isSingleton())return;const t=new this.instance(this.winter);t.detach=()=>this.instances.splice(this.instances.indexOf(t),1),this.instances.push(t)}getDependencies(){return this.isFunction()||"function"!=typeof this.instance.prototype.dependencies?[]:this.instance.prototype.dependencies().map((t=>t.toLowerCase()))}dependenciesFulfilled(){const t=this.getDependencies();let e=!0;return t.forEach((t=>{this.winter.hasModule(t)||(e=!1)})),e}mock(t,e){if(!this.isFunction()){if(!this.instance.prototype[t])throw new Error('Function "'.concat(t,'" does not exist and cannot be mocked'));this.mocks[t]=e,this.originalFunctions[t]=this.instance.prototype[t],this.isSingleton()&&0===this.instances.length&&(this.initialiseSingleton(),this.instances[0][t]=function(){return e(this,...arguments)})}}unmock(t){this.isFunction()||this.mocks[t]&&(this.isSingleton()&&(this.instances[0][t]=this.originalFunctions[t]),delete this.mocks[t],delete this.originalFunctions[t])}}var o=t=>{let e;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e&&cancelAnimationFrame(e),e=requestAnimationFrame((()=>{t(...r)}))}};class i extends e{constructor(t){super(t),window.wnJSON=t=>this.parse(t)}parse(t){const e=this.parseString(t);return JSON.parse(e)}parseString(t){if(!(t=t.trim()).length)throw new Error("Broken JSON object.");let e="",n=null,r=null,o="";for(;t&&","===t[0];)t=t.substr(1);if('"'===t[0]||"'"===t[0]){if(t[t.length-1]!==t[0])throw new Error("Invalid string JSON object.");o='"';for(var i=1;i<t.length;i++)if("\\"===t[i])"'"===t[i+1]||(o+=t[i]),o+=t[i+1],i++;else{if(t[i]===t[0])return o+='"',o;'"'===t[i]?o+='\\"':o+=t[i]}throw new Error("Invalid string JSON object.")}if("true"===t||"false"===t)return t;if("null"===t)return"null";var s=parseFloat(t);if(!isNaN(s))return s.toString();if("{"===t[0]){n="needKey",r=null,e="{";for(i=1;i<t.length;i++)if(!this.isBlankChar(t[i]))if("needKey"!==n||'"'!==t[i]&&"'"!==t[i]){if("needKey"===n&&this.canBeKeyHead(t[i]))r=this.parseKey(t,i),e+='"',e+=r,e+='"',i+=r.length-1,n="afterKey";else if("afterKey"===n&&":"===t[i])e+=":",n=":";else if(":"===n)o=this.getBody(t,i),i=i+o.originLength-1,e+=this.parseString(o.body),n="afterBody";else if("afterBody"===n||"needKey"===n){let r=i;for(;","===t[r]||this.isBlankChar(t[r]);)r++;if("}"===t[r]&&r===t.length-1){for(;","===e[e.length-1];)e=e.substr(0,e.length-1);return e+="}",e}r!==i&&"{"!==e&&(e+=",",n="needKey",i=r-1)}}else r=this.parseKey(t,i+1,t[i]),e+='"'+r+'"',i+=r.length,i+=1,n="afterKey";throw new Error("Broken JSON object near "+e)}if("["===t[0]){e="[",n="needBody";for(i=1;i<t.length;i++)if(" "!==t[i]&&"\n"!==t[i]&&"\t"!==t[i])if("needBody"===n){if(","===t[i]){e+="null,";continue}if("]"===t[i]&&i===t.length-1)return","===e[e.length-1]&&(e=e.substr(0,e.length-1)),e+="]",e;o=this.getBody(t,i),i=i+o.originLength-1,e+=this.parseString(o.body),n="afterBody"}else if("afterBody"===n)if(","===t[i])for(e+=",",n="needBody";","===t[i+1]||this.isBlankChar(t[i+1]);)","===t[i+1]&&(e+="null,"),i++;else if("]"===t[i]&&i===t.length-1)return e+="]",e;throw new Error("Broken JSON array near "+e)}}getBody(t,e){let n="";if('"'===t[e]||"'"===t[e]){n=t[e];for(var r=e+1;r<t.length;r++)if("\\"===t[r])n+=t[r],r+1<t.length&&(n+=t[r+1]),r++;else{if(t[r]===t[e])return n+=t[e],{originLength:n.length,body:n};n+=t[r]}throw new Error("Broken JSON string body near "+n)}if("t"===t[e]){if(t.indexOf("true",e)===e)return{originLength:"true".length,body:"true"};throw new Error("Broken JSON boolean body near "+t.substr(0,e+10))}if("f"===t[e]){if(t.indexOf("f",e)===e)return{originLength:"false".length,body:"false"};throw new Error("Broken JSON boolean body near "+t.substr(0,e+10))}if("n"===t[e]){if(t.indexOf("null",e)===e)return{originLength:"null".length,body:"null"};throw new Error("Broken JSON boolean body near "+t.substr(0,e+10))}if("-"===t[e]||"+"===t[e]||"."===t[e]||t[e]>="0"&&t[e]<="9"){n="";for(r=e;r<t.length;r++){if(!("-"===t[r]||"+"===t[r]||"."===t[r]||t[r]>="0"&&t[r]<="9"))return{originLength:n.length,body:n};n+=t[r]}throw new Error("Broken JSON number body near "+n)}if("{"===t[e]||"["===t[e]){var o=[t[e]];n=t[e];for(r=e+1;r<t.length;r++){if(n+=t[r],"\\"===t[r])r+1<t.length&&(n+=t[r+1]),r++;else if('"'===t[r])'"'===o[o.length-1]?o.pop():"'"!==o[o.length-1]&&o.push(t[r]);else if("'"===t[r])"'"===o[o.length-1]?o.pop():'"'!==o[o.length-1]&&o.push(t[r]);else if('"'!==o[o.length-1]&&"'"!==o[o.length-1])if("{"===t[r])o.push("{");else if("}"===t[r]){if("{"!==o[o.length-1])throw new Error("Broken JSON "+("{"===t[e]?"object":"array")+" body near "+n);o.pop()}else if("["===t[r])o.push("[");else if("]"===t[r]){if("["!==o[o.length-1])throw new Error("Broken JSON "+("{"===t[e]?"object":"array")+" body near "+n);o.pop()}if(!o.length)return{originLength:r-e,body:n}}throw new Error("Broken JSON "+("{"===t[e]?"object":"array")+" body near "+n)}throw new Error("Broken JSON body near "+t.substr(e-5>=0?e-5:0,50))}parseKey(t,e,n){let r="";for(var o=e;o<t.length;o++){if(n&&n===t[o])return r;if(!n&&(" "===t[o]||":"===t[o]))return r;r+=t[o],"\\"===t[o]&&o+1<t.length&&(r+=t[o+1],o++)}throw new Error("Broken JSON syntax near "+r)}canBeKeyHead(t){return"\\"!==t[0]&&(t[0]>="a"&&t[0]<="z"||t[0]>="A"&&t[0]<="Z"||"_"===t[0]||(t[0]>="0"&&t[0]<="9"||("$"===t[0]||t.charCodeAt(0)>255)))}isBlankChar(t){return" "===t||"\n"===t||"\t"===t}}class s extends e{constructor(t){super(t),window.wnSanitize=t=>this.sanitize(t)}sanitize(t,e){const n=(new DOMParser).parseFromString(t,"text/html"),r=void 0===e||"boolean"!=typeof e||e;return this.sanitizeNode(n.getRootNode()),r?n.body.innerHTML:n.innerHTML}sanitizeNode(t){if("SCRIPT"===t.tagName)return void t.remove();this.trimAttributes(t);Array.from(t.children).forEach((t=>{this.sanitizeNode(t)}))}trimAttributes(t){if(t.attributes)for(let e=0;e<t.attributes.length;e++){const n=t.attributes.item(e).name,r=t.attributes.item(e).value;0!==n.indexOf("on")&&0!==r.indexOf("javascript:")||t.removeAttribute(n)}}}class c{constructor(t){this.modules={},this.attachAbstracts(),this.loadUtilities(),this.initialise()}attachAbstracts(){this.Module=t,this.Singleton=e}loadUtilities(){this.addModule("debounce",o),this.addModule("jsonParser",i),this.addModule("sanitizer",s)}initialise(){window.addEventListener("DOMContentLoaded",(()=>{this.initialiseSingletons(),this.globalEvent("ready")}))}initialiseSingletons(){Object.values(this.modules).forEach((t=>{t.isSingleton()&&t.initialiseSingleton()}))}addModule(t,e){const n=t.toLowerCase();if(this.hasModule(n))throw new Error('A module called "'.concat(t,'" is already registered.'));if("function"!=typeof e&&e instanceof ModuleAbstract==!1)throw new Error("The provided module must be a Module class instance or callback function.");this.modules[n]=new r(n,this,e),this[n]=function(){return this.modules[n].getInstance(...arguments)}}removeModule(t){const e=t.toLowerCase();void 0!==this.modules[e]&&(this.modules[e].getInstances().forEach((t=>{t.destructor()})),delete this.modules[e],delete this[e])}hasModule(t){const e=t.toLowerCase();return void 0!==this.modules[e]}getModules(){return this.modules}getModuleNames(){return Object.keys(this.modules)}getModule(t){if(!this.hasModule(t))throw new Error('No module called "'.concat(t,'" has been registered.'));return this.modules[t]}listensToEvent(t){const e=[];for(const[n,r]of Object.entries(this.modules)){if(r.isFunction())continue;if(!r.hasMethod("listens"))continue;"string"==typeof r.callMethod("listens")[t]&&e.push(n)}return e}globalEvent(t){const e=this.listensToEvent(t);if(0===e.length)return!0;let n=!1,r=Array.from(arguments);return r.shift(),e.forEach((e=>{const o=this.getModule(e);if(o.isFunction())return;o.isSingleton()&&0===o.getInstances().length&&o.initialiseSingleton();const i=o.callMethod("listens")[t];o.getInstances().forEach((t=>{if(!n){if(!t[i])throw new Error('Missing "'.concat(i,'" method in "').concat(e,'" module'));!1===t[i](...r)&&(n=!0)}}))})),!n}globalPromiseEvent(t){const e=this.listensToEvent(t);if(0===e.length)return Promise.resolve();const n=[];let r=Array.from(arguments);return r.shift(),e.forEach((e=>{const o=this.getModule(e);if(o.isFunction())return;o.isSingleton()&&0===o.getInstances().length&&o.initialiseSingleton();const i=o.callMethod("listens")[t];o.getInstances().forEach((t=>{const e=t[i](...r);e instanceof Promise!=!1&&n.push(e)}))})),0===n.length?Promise.resolve():Promise.all(n)}}(t=>{const e=new c;t.winter=e,t.Winter=e})(window)}()}();